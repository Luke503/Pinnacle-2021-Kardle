<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Kardle.</title>
    <link rel=icon href="{{ url_for('static', filename='img/Kardle.png') }}" sizes="16x16" type=png>
    <link rel=icon href="{{ url_for('static', filename='img/Kardle.png') }}" sizes="48x48" type=png>
    <link rel=icon href="{{ url_for('static', filename='img/Kardle.png') }}" sizes="128x128" type=png>
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap/css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abel&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Share+Tech+Mono&amp;display=swap">
    <link rel="stylesheet" href="{{ url_for('static', filename='fonts/fontawesome-all.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='fonts/font-awesome.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='fonts/simple-line-icons.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='fonts/fontawesome5-overrides.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

</head>

<body style="background: #fff9f1;">
    <nav class="navbar navbar-light navbar-expand-lg shadow-sm" id="mainNav" style="background: #211f1c;">
        <div class="container"><a href="index.html"><i class="fa fa-credit-card-alt" style="color: rgb(255,255,255);"></i></a><button data-bs-toggle="collapse" data-bs-target="#navbarResponsive" class="navbar-toggler" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation" style="border-color: rgba(0,0,0,0);"><i class="fa fa-bars" style="color: rgb(136, 136, 136);"></i></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item" style="padding-right: 10px;"><a class="nav-link" href="index.html" style="color: rgb(255,255,255);font-family: Abel, sans-serif;">Home</a></li>
                    <li class="nav-item dropdown no-arrow">
                        <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#" style="color: rgb(255,255,255);"><span style="font-family: Abel, sans-serif;">User123</span><i class="icon-user" style="padding: 8px;padding-right: 8px;color: rgb(255,255,255);"></i></a>
                            <div class="dropdown-menu shadow dropdown-menu-end animated--grow-in"><a class="dropdown-item" href="/dashboard.html"><i class="icon-speedometer fa-sm fa-fw me-2 text-gray-400"></i>Dashboard</a>
                                <div class="dropdown-divider"></div><a class="dropdown-item" href="#"><i class="icon-logout fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Logout</a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div id="wrapper" style="margin: 30px;margin-top: 70px;">
        <div class="container-fluid" id="dashboard">
            <div class="row">
                <div class="col-md-12 d-xl-flex justify-content-xl-center">
                    <h1 class="d-flex justify-content-center" style="font-size: 18px;padding-bottom: 5px;padding-top: 10px;color: rgb(34, 34, 34);font-family: Abel, sans-serif;"><strong>Current Balance</strong></h1>
                </div>
                <div class="col d-sm-flex d-md-flex d-lg-flex d-xl-flex justify-content-sm-center justify-content-md-center justify-content-lg-center justify-content-xl-center mb-4">
                    <div class="card shadow border-start-success py-2">
                        <div class="card-body" style="width: 300.5px;">
                            <div class="row align-items-center no-gutters">
                                <div class="col d-flex d-lg-flex d-xl-flex justify-content-center justify-content-lg-center justify-content-xl-center me-2" style="width: 60.5px;">
                                    <div class="text-dark d-xl-flex justify-content-xl-center fw-bold h5 mb-0"><i class="fas fa-dollar-sign fa-2x text-gray-300" style="font-size: 22px;padding: 5px;padding-left: 5px;padding-top: 5px;"></i><span id="accountBalance" style="padding: 5px;font-size: 20px;"></span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 d-xl-flex justify-content-xl-center">
                    <h1 class="d-flex justify-content-center" style="font-size: 18px;padding-bottom: 5px;padding-top: 10px;color: rgb(34, 34, 34);font-family: Abel, sans-serif;"><br></h1>
                </div>
            </div>
        </div>
    </div>
    <div class="table-responsive" style="padding: -2px;padding-right: 200px;padding-left: 200px;">
        <table class="table">
            <thead>
                <tr class="text-center">
                    <th style="color: rgb(66,201,18);font-family: Abel, sans-serif;">Cash In<i class="fa fa-exchange" style="padding-left: 8px;"></i></th>
                    <th style="color: rgb(238,55,55);font-family: Abel, sans-serif;">Cash Out<i class="fa fa-exchange" style="padding-left: 8px;"></i></th>
                </tr>
            </thead>
            <tbody class="text-center">
                <tr>
                    <td class="text-center" style="width: 413px;text-align: left;font-family: Abel, sans-serif;">$10 Grass/lawn work</td>
                    <td class="text-center" style="text-align: left;font-family: Abel, sans-serif;"><img src="{{ url_for('static', filename='img/Kardle.png') }}" style="width: 39px;">$100 property deposit</td>
                </tr>
                <tr>
                    <td class="text-center" style="width: 413px;text-align: left;font-family: Abel, sans-serif;">$279 Moving help</td>
                    <td class="text-center" style="text-align: left;font-family: Abel, sans-serif;">$34.97 Target.com</td>
                </tr>
                <tr>
                    <td class="text-center" style="width: 413px;text-align: left;font-family: Abel, sans-serif;">$10 donation</td>
                    <td class="text-center" style="text-align: left;font-family: Abel, sans-serif;">$20 Gold's Gym membership</td>
                </tr>
                <tr>
                    <td class="text-center" style="width: 413px;text-align: left;font-family: Abel, sans-serif;">$98.32 Doordash inc.</td>
                    <td class="text-center" style="text-align: left;font-family: Abel, sans-serif;">$56.50 FredMeyer's</td>
                </tr>
                <tr>
                    <td class="text-center" style="width: 413px;text-align: left;font-family: Abel, sans-serif;">$26 Fivver inc.</td>
                    <td class="text-center" style="text-align: left;font-family: Abel, sans-serif;"><img src="{{ url_for('static', filename='img/Kardle.png') }}" style="width: 39px;">$20 Chevron</td>
                </tr>
            </tbody>
        </table>
    </div>
    <script src="{{ url_for('static', filename='bootstrap/js/bootstrap.min.js') }}"></script>
    <script>

    var xmlHttp = new XMLHttpRequest();
        
        var theUrl = "https://horizon-testnet.stellar.org/accounts/GABTNYYBXBAQF4N6NXG7LMKTVKQ63I4JVKIO3T77IRGUSDCZXZ4D3N5M";
        xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
        xmlHttp.send( null );

        var response = JSON.parse(xmlHttp.responseText);

        exchangeurlstring = "https://api.nomics.com/v1/currencies/ticker?key=e8dc88460495df57ac7d9c54ddc1460aab3f6f9a&ids=XLM&interval=1d,30d&convert=USD&per-page=100&page=1"
    
        xmlHttp.open( "GET", exchangeurlstring, false ); // false for synchronous request
        xmlHttp.send( null );
        var exchangeResponse = JSON.parse(xmlHttp.responseText);
        var exchangeRate = exchangeResponse[0]['price'];


        // Source: https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript
        var balance = Number(response.balances[0].balance * exchangeRate).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        
        console.log(exchangeRate)

        document.getElementById("accountBalance").innerHTML = balance;


    </script>
    <div class="container">
        <div class="row d-xl-flex justify-content-xl-center">
            <div class="col-md-4 col-lg-1 col-xl-1 offset-lg-4 offset-xl-0"><img class="d-xl-flex" src="{{ url_for('static', filename='img/Kardle.png') }}" style="width: 83px;"></div>
            <div class="col-md-4 col-lg-1 col-xl-1" style="padding: 0px;margin-right: -31px;"><i class="fa fa-long-arrow-right" style="font-size: 37px;padding-top: 17px;"></i></div>
            <div class="col-md-4 col-lg-3 col-xl-2 offset-lg-1" style="padding: 0px;padding-top: 24px;margin-left: -4px;"><span class="d-xl-flex justify-content-xl-center" style="font-family: Abel, sans-serif;padding-bottom: 19px;width: 155px;">Transaction Using Kardle</span></div>
        </div>
    </div>
</body>

</html>